<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/style_site.css">
    <title>Расписание УРТК</title>
    <style>
        .input-error {
            border: 2px solid red !important;
            outline: none;
        }

        /* Подсветка выбранной опции */
        .dropdown-option.selected {
            background: #69A99B;
            color: #fff;
        }

        /* Анимация открытия/закрытия выпадающего списка */
        .dropdown {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s cubic-bezier(.4, 0, .2, 1), opacity 0.3s;
            opacity: 0;
        }

        .dropdown:not(.hidden) {
            max-height: 300px;
            opacity: 1;
            box-shadow: 0 4px 16px 0 rgba(34, 139, 126, 0.10);
        }

        .input-sign-password-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .toggle-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        .toggle-password svg {
            width: 22px;
            height: 22px;
            fill: #69A99B;
        }
    </style>
</head>

<body>
    <div id="sign" class="auth_block bgc flex">
        <form id="registerForm">
            <div class="flex">
                <h2 class="h2_sign">Расписание УРТК <img class="img_logo" src="../image/лого.png"></h2>
                <h1 class="h1_sign">Регистрация на платформе</h1>
            </div>
            <div class="form-container">
                <div class="signup">
                    <div class="row">
                        <div class="margin">
                            <label class="font" style="display: block;" for="">Имя</label>
                            <input class="input_sign" name="name" placeholder="Ваше имя">
                        </div>
                        <div class="margin">
                            <label class="font" style="display: block;">Email</label>
                            <input class="input_sign" name="email" placeholder="Email">
                        </div>
                    </div>
                    <div class="row">
                        <div class="margin">
                            <label class="font" style="display: block;">Пароль</label>
                            <div class="input-sign-password-wrapper">
                                <input class="input_sign" name="password" type="password" placeholder="Ваш пароль"
                                    id="passwordInput">
                                <button type="button" class="toggle-password" tabindex="-1" aria-label="Показать/скрыть пароль"
                                    data-target="passwordInput">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                        <path d="M23 1 1 23" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="margin">
                            <label class="font" style="display: block;">Повторите пароль</label>
                            <div class="input-sign-password-wrapper">
                                <input class="input_sign" name="confirmPassword" type="password" placeholder="Ваш пароль"
                                    id="confirmPasswordInput">
                                <button type="button" class="toggle-password" tabindex="-1" aria-label="Показать/скрыть пароль"
                                    data-target="confirmPasswordInput">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                        <path d="M23 1 1 23" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="my-schedule_2">
                    <h4 style="
                    color: white;
                    font-family: 'Inter', sans-serif;
                    margin-left: 3%;
                    ">Ваше расписание
                    </h4>
                    <p class="label" style="
                    margin-bottom: 1%;
                    color: white;
                    font-family: 'Inter', sans-serif;
                    margin-left: 3%;
                    font-size: 13px;
                    margin-top: -1%;
                    ">Тип расписания
                    </p>
                    <button class="input_combobox" style="position: relative" aria-haspopup="true" aria-expanded="false"
                        ;>
                        <span style="
                        position: relative;
                        text-align: left;
                        top: 0;
                        font-family: 'Inter', sans-serif;
                        margin-right: 90%;
                        color: white;
                        white-space: nowrap;
                        display: inline-block;
                        max-width: 100%;
                        ">Студент
                        </span>
                        <svg style="
                            position: absolute;
                            right: 10px;
                            top: 50%;
                            transform: translateY(-50%);
                        " xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m7 15 5 5 5-5"></path>
                            <path d="m7 9 5-5 5 5"></path>
                        </svg>
                    </button>
                    <div id="scheduleTypeDropdown" class="dropdown hidden">
                        <button class="dropdown-option">Студент</button>
                        <button class="dropdown-option">По преподавателю</button>
                    </div>
                    <p id="secondLabel" style="
                        margin-bottom: 1%;
                        margin-top: 15px;
                        color: white;
                        font-family: 'Inter', sans-serif;
                        margin-left: 3%;
                        font-size: 13px;
                        ">
                        Группа
                    </p>
                    <button class="input_combobox" style="
                    position: relative;
                    background-color: black;
                    color: white;
                    text-align: left;
                    ">
                        <span style="
                        position: relative;
                        left: 5px;
                        top: 0;
                        font-family: 'Inter', sans-serif;
                        ">Выберите...
                        </span>
                        <svg style="
                            position: absolute;
                            right: 10px;
                            top: 50%;
                            transform: translateY(-50%);
                        " xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m7 15 5 5 5-5"></path>
                            <path d="m7 9 5-5 5 5"></path>
                        </svg>
                    </button>
                    <div id="groupDropdown" class="dropdown hidden"></div>
                    <button class="button_sign margin_sign" id="registerBtn">Зарегестрироваться</button>
                </div>
            </div>

        </form>
    </div>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        // Элементы первого выпадающего списка
        const scheduleTypeBtn = document.querySelectorAll(".input_combobox")[0];
        const scheduleDropdown = document.getElementById("scheduleTypeDropdown");
        const scheduleLabel = scheduleTypeBtn.querySelector("span");

        // Элементы второго выпадающего списка
        const groupBtn = document.querySelectorAll(".input_combobox")[1];
        const groupDropdown = document.getElementById("groupDropdown");
        const groupLabel = groupBtn.querySelector("span");
        const secondLabel = document.getElementById("secondLabel");

        // Опции для второго выпадающего списка
        const optionsByType = {
            Студент: ["ИС-127", "ИС-128", "ИС-129"],
            "По преподавателю": ["Иванов", "Петров", "Сидоров"]
        };

        // Текущий тип расписания и текущая опция второго списка
        let currentType = "Студент";
        let currentGroupOption = null;

        // Функция для обновления второго выпадающего списка
        function updateGroupOptions(type) {
            groupDropdown.innerHTML = ""; // Очищаем старые опции

            optionsByType[type].forEach((optionText) => {
                const btn = document.createElement("button");
                btn.className = "dropdown-option";
                btn.textContent = optionText;

                btn.addEventListener("click", function (e) {
                    e.preventDefault();
                    groupLabel.textContent = optionText; // Обновляем текст
                    currentGroupOption = optionText; // Сохраняем выбранную опцию
                    groupDropdown.classList.add("hidden"); // Закрываем список
                });

                groupDropdown.appendChild(btn);
            });

            // Обновляем метку над вторым списком
            secondLabel.textContent = {
                Студент: "Группа",
                "По преподавателю": "Преподаватель"
            }[type];

            // Восстанавливаем предыдущую опцию, если она существует в новом списке
            if (
                currentGroupOption &&
                optionsByType[type].includes(currentGroupOption)
            ) {
                groupLabel.textContent = currentGroupOption;
            } else {
                groupLabel.textContent = "Выберите...";
                currentGroupOption = null; // Сбрасываем, если опция недоступна
            }
        }

        // Открытие первого выпадающего списка
        scheduleTypeBtn.addEventListener("click", function (e) {
            e.preventDefault();
            scheduleDropdown.classList.toggle("hidden");
            groupDropdown.classList.add("hidden");
        });

        // Открытие второго выпадающего списка
        groupBtn.addEventListener("click", function (e) {
            e.preventDefault();
            groupDropdown.classList.toggle("hidden");
            scheduleDropdown.classList.add("hidden");
        });

        // Выбор опции в первом выпадающем списке
        scheduleDropdown
            .querySelectorAll(".dropdown-option")
            .forEach((option) => {
                option.addEventListener("click", function (e) {
                    e.preventDefault();
                    const selectedType = this.textContent;
                    scheduleLabel.textContent = selectedType; // Обновляем текст
                    scheduleDropdown.classList.add("hidden");
                    currentType = selectedType;
                    updateGroupOptions(selectedType); // Обновляем второй список
                });
            });

        // Закрытие списков при клике вне
        document.addEventListener("click", function (e) {
            if (
                !scheduleTypeBtn.contains(e.target) &&
                !scheduleDropdown.contains(e.target)
            ) {
                scheduleDropdown.classList.add("hidden");
            }
            if (
                !groupBtn.contains(e.target) &&
                !groupDropdown.contains(e.target)
            ) {
                groupDropdown.classList.add("hidden");
            }
        });

        // Инициализация
        scheduleLabel.textContent = "Студент";
        updateGroupOptions(currentType);

        // --- Переход по кнопке "Зарегестрироваться" ---
        const registerBtn = document.getElementById("registerBtn");
        registerBtn.addEventListener("click", function (e) {
            e.preventDefault();
            const group = groupLabel.textContent.trim();
            const type = scheduleLabel.textContent.trim();

            if (type === "Студент") {
                if (group === "ИС-127") {
                    window.location.href = "../lk/my-schedule.html";
                } else if (group === "ИС-128") {
                    window.location.href = "../lk/my-schedule_is-128.html";
                } else if (group === "ИС-129") {
                    window.location.href = "../lk/my-schedule_is-129.html";
                } else {
                    alert("Пожалуйста, выберите группу!");
                }
            } else {
                alert("Для выбранного типа расписания переход не реализован.");
            }
        });
    });
</script>
<script>
const eyeOpen = `<svg viewBox="0 0 24 24"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>`;
const eyeClosed = `<svg viewBox="0 0 24 24"><path d="M17.94 17.94A10.94 10.94 0 0 1 12 19C5 19 1 12 1 12a21.8 21.8 0 0 1 5.06-7.94"/><path d="M22.54 12.88A10.94 10.94 0 0 0 23 12s-4-7-11-7a10.94 10.94 0 0 0-4.06.76"/><line x1="1" y1="1" x2="23" y2="23"/><path d="M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"/></svg>`;

let passwordsVisible = false;

function setPasswordVisibility(visible) {
    const passwordInputs = [
        document.getElementById('passwordInput'),
        document.getElementById('confirmPasswordInput')
    ];
    document.querySelectorAll('.toggle-password').forEach(btn => {
        btn.innerHTML = visible ? eyeOpen : eyeClosed;
    });
    passwordInputs.forEach(input => {
        if (input) input.type = visible ? "text" : "password";
    });
}

document.querySelectorAll('.toggle-password').forEach(btn => {
    btn.innerHTML = eyeClosed;
    btn.addEventListener('click', function () {
        passwordsVisible = !passwordsVisible;
        setPasswordVisibility(passwordsVisible);
    });
});
</script>
    <script src="../js/Users.js"></script>
    <script src="../js/auth.js"></script>





</body>

</html>