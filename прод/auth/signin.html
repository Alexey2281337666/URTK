<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/style_site.css">
    <title>Расписание УРТК</title>
    <style>
        body {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(ellipse at 70% 30%, #232328 60%, #18181c 100%);
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            animation: bgFadeIn 1.2s cubic-bezier(.4,0,.2,1);
        }
        @keyframes bgFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .auth_block {
            width: 420px;
            max-width: 95vw;
            background: rgba(25,25,29,0.98);
            border-radius: 24px;
            box-shadow: 0 8px 40px 0 rgba(34, 139, 126, 0.18);
            padding: 48px 36px 36px 36px;
            margin: 0;
            animation: cardAppear 0.8s cubic-bezier(.4,0,.2,1);
            transition: box-shadow 0.3s;
        }
        

        .h2_sign {
            font-size: 1.3rem;
            margin: 0 0 10px 0;
            display: flex;
            align-items: center;
            color: #69A99B;
            font-weight: 600;
            letter-spacing: 0.02em;
            gap: 10px;
            opacity: 0.85;
            animation: fadeIn 1.2s 0.2s both;
        }
        .h1_sign {
            font-size: 1.7rem;
            margin: 0 0 28px 0;
            color: #fff;
            font-weight: 700;
            text-align: center;
            letter-spacing: 0.01em;
            animation: fadeIn 1.2s 0.3s both;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px);}
            to { opacity: 1; transform: translateY(0);}
        }

        .img_logo {
            width: 36px !important;
            height: 36px !important;
            margin-left: 10px;
            filter: drop-shadow(0 0 6px #69A99B44);
            transition: filter 0.3s;
        }

        .form-container, .signup {
            width: 100%;
            animation: fadeIn 1.2s 0.4s both;
        }

        .row {
            display: flex;
            gap: 18px;
            margin-bottom: 18px;
        }
        @media (max-width: 600px) {
            .auth_block { padding: 18px 4vw 24px 4vw; border-radius: 14px; }
            .row { flex-direction: column; gap: 8px; }
        }

        .margin { flex: 1; }

        .input_sign, .input_combobox {
            background: #18181c;
            border: 1.5px solid #333;
            color: #fff;
            border-radius: 16px;
            padding: 14px 18px;
            font-size: 1.08rem;
            margin-bottom: 18px;
            transition: border 0.2s, box-shadow 0.2s;
            outline: none;
            width: 100%;
            box-sizing: border-box;
            animation: fadeIn 1.2s 0.5s both;
        }
        .input_sign:focus, .input_combobox:focus {
            border: 1.5px solid #69A99B;
            box-shadow: 0 0 0 2px #69A99B33;
        }

        .input-error {
            border: 2px solid #ff4d4f !important;
            background: #2a1818 !important;
            animation: shake 0.3s;
        }
        @keyframes shake {
            10%, 90% { transform: translateX(-2px);}
            20%, 80% { transform: translateX(4px);}
            30%, 50%, 70% { transform: translateX(-8px);}
            40%, 60% { transform: translateX(8px);}
        }

        .input-sign-password-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        .toggle-password {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            padding: 0;
            transition: filter 0.2s;
        }
        .toggle-password svg {
            width: 22px;
            height: 22px;
            fill: #69A99B;
            opacity: 0.8;
            transition: fill 0.2s;
        }
        .toggle-password:hover svg {
            fill: #69A99B;
            opacity: 1;
        }

        .button_sign {
            background: #69A99B;
            color: #232328;
            font-weight: 700;
            border: none;
            border-radius: 16px;
            box-shadow: 0 2px 12px 0 #00ffe733;
            transition: background 0.2s, box-shadow 0.2s, transform 0.1s, color 0.2s;
            margin: -10px auto 0 auto;
            display: block;
            width: 70%;
            height: 48px;
            font-size: 1.1rem;
            letter-spacing: 0.02em;
            animation: fadeIn 1.2s 0.7s both;
            margin-bottom: 25px;
        }

.button_sign:hover, .button_sign:focus {
    background: linear-gradient(90deg, #69A99B 0%, #00ffe7 100%);
    box-shadow: 0 4px 24px 0 #00ffe7bb, 0 0 0 4px #69A99B55;
    transform: translateY(-2px) scale(1.04);
    color: #19191d;
}

        .my-schedule_2 {
            position: static !important;
            width: 100%;
            margin: 24px 0 0 0;
            background: #232328;
            border-radius: 16px;
            padding: 24px 18px;
            box-sizing: border-box;
            animation: fadeIn 1.2s 0.6s both;
            box-shadow: 0 2px 16px 0 #69A99B11;
        }

        .dropdown-wrapper {
            position: relative;
            width: 100%;
        }
        .input_combobox {
            cursor: pointer;
            padding-right: 38px;
            background-color: black;
            border: 1.5px solid #333;
            color: #fff;
            border-radius: 16px;
            transition: border 0.2s, box-shadow 0.2s;
        }
        .input_combobox:focus {
            border: 1.5px solid #69A99B;
            box-shadow: 0 0 0 2px #69A99B33;
        }
        .dropdown {
            position: absolute;
            left: 0;
            top: 100%;
            width: 100%;
            min-width: 160px;
            max-width: 100%;
            background-color: #232328;
            margin-top: 2px;
            border-radius: 16px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            padding: 5px 0;
            box-shadow: 0 0 16px rgba(0,0,0,0.18);
            box-sizing: border-box;
            opacity: 0;
            pointer-events: none;
            transform: translateY(10px) scale(0.98);
            transition: opacity 0.3s, transform 0.3s;
        }
        .dropdown:not(.hidden) {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0) scale(1);
        }
        .dropdown-option {
            background: none;
            border: none;
            color: #fff;
            text-align: left;
            padding: 12px 22px;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: background 0.25s, color 0.25s;
            width: 100%;
            border-radius: 12px;
            font-size: 1rem;
        }
        .dropdown-option:hover, .dropdown-option.selected {
            background-color: #69A99B;
            color: #232328;
        }

        .label, #secondLabel {
            color: #b7b7c7;
            font-size: 0.97rem;
            margin-bottom: 6px;
            margin-left: 3%;
            margin-top: 0;
            letter-spacing: 0.01em;
            font-weight: 500;
            opacity: 0.85;
        }

        h4 {
            font-size: 1.08rem;
            color: #69A99B;
            margin-bottom: 10px;
            margin-left: 3%;
            font-weight: 600;
            letter-spacing: 0.01em;
            opacity: 0.9;
        }

        /* Анимация загрузки */
        #loader-bg {
            position: fixed;
            z-index: 9999;
            inset: 0;
            background: radial-gradient(ellipse at 70% 30%, #232328 60%, #18181c 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s;
        }
        .loader {
            width: 64px;
            height: 64px;
            border: 6px solid #69A99B;
            border-top: 6px solid #00ffe7;
            border-radius: 50%;
            animation: spinLoader 1s linear infinite;
            box-shadow: 0 0 24px #00ffe7aa;
        }
        @keyframes spinLoader {
            0% { transform: rotate(0deg);}
            100% { transform: rotate(360deg);}
        }
        #loader-bg.loaded {
            opacity: 0;
            pointer-events: none;
        }
    </style>

</head>

<body>
    <!-- Анимация загрузки -->
    <div id="loader-bg">
        <div class="loader"></div>
    </div>
    <div id="sign" class="auth_block bgc flex">
        <form id="registerForm">
            <div class="flex">
                <h2 class="h2_sign">Расписание УРТК <img class="img_logo" src="../image/лого.png"></h2>
                <h1 class="h1_sign">Регистрация на платформе</h1>
            </div>
                <div class="signup">
                    <div class="row">
                        <div class="margin">
                            <label class="font" style="display: block;" for="">Имя</label>
                            <input class="input_sign" name="name" placeholder="Ваше имя">
                        </div>
                        <div class="margin">
                            <label class="font" style="display: block;">Email</label>
                            <input class="input_sign" name="email" placeholder="Email">
                        </div>
                    </div>
                    <div class="row">
                        <div class="margin">
                            <label class="font" style="display: block;">Пароль</label>
                            <div class="input-sign-password-wrapper">
                                <input class="input_sign" name="password" type="password" placeholder="Ваш пароль"
                                    id="passwordInput">
                                <button type="button" class="toggle-password" tabindex="-1" aria-label="Показать/скрыть пароль"
                                    data-target="passwordInput">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                        <path d="M23 1 1 23" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="margin">
                            <label class="font" style="display: block;">Повторите пароль</label>
                            <div class="input-sign-password-wrapper">
                                <input class="input_sign" name="confirmPassword" type="password" placeholder="Ваш пароль"
                                    id="confirmPasswordInput">
                                <button type="button" class="toggle-password" tabindex="-1" aria-label="Показать/скрыть пароль"
                                    data-target="confirmPasswordInput">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
                                        <path d="M23 1 1 23" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="my-schedule_2">
                    <h4 style="
        color: white;
        font-family: 'Inter', sans-serif;
        margin-left: 3%;
    ">Ваше расписание
    </h4>
                    <p class="label" style="
        margin-bottom: 1%;
        color: white;
        font-family: 'Inter', sans-serif;
        margin-left: 3%;
        font-size: 13px;
        margin-top: -1%;
    ">Тип расписания
    </p>
                    <!-- Обёртка для первого выпадающего списка -->
                    <div class="dropdown-wrapper">
                        <button class="input_combobox" style="position: relative" aria-haspopup="true" aria-expanded="false">
                            <span style="
                position: relative;
                text-align: left;
                top: 0;
                font-family: 'Inter', sans-serif;
                margin-right: 90%;
                color: white;
                white-space: nowrap;
                display: inline-block;
                max-width: 100%;
            ">Студент
            </span>
                            <svg style="
                position: absolute;
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
            " xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m7 15 5 5 5-5"></path>
                                <path d="m7 9 5-5 5 5"></path>
                            </svg>
                        </button>
                        <div id="scheduleTypeDropdown" class="dropdown hidden">
                            <button class="dropdown-option">Студент</button>
                            <button class="dropdown-option">По преподавателю</button>
                        </div>
                    </div>
                    <p id="secondLabel" style="
        margin-bottom: 1%;
        margin-top: 15px;
        color: white;
        font-family: 'Inter', sans-serif;
        margin-left: 3%;
        font-size: 13px;
    ">
                        Группа
                    </p>
                    <!-- Обёртка для второго выпадающего списка -->
                    <div class="dropdown-wrapper">
                        <button class="input_combobox" style="
            position: relative;
            background-color: black;
            color: white;
            text-align: left;
        ">
                            <span style="
                position: relative;
                left: 5px;
                top: 0;
                font-family: 'Inter', sans-serif;
            ">Выберите...
            </span>
                            <svg style="
                position: absolute;
                right: 10px;
                top: 50%;
                transform: translateY(-50%);
            " xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                                stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m7 15 5 5 5-5"></path>
                                <path d="m7 9 5-5 5 5"></path>
                            </svg>
                        </button>
                        <div id="groupDropdown" class="dropdown hidden"></div>
                    </div>
                    <button class="button_sign margin_sign" id="registerBtn">Зарегестрироваться</button>
                </div>
                <!-- ...existing code... -->
            

        </form>
    </div>
    <script>
    document.addEventListener("DOMContentLoaded", function () {
        // Элементы первого выпадающего списка
        const scheduleTypeBtn = document.querySelectorAll(".input_combobox")[0];
        const scheduleDropdown = document.getElementById("scheduleTypeDropdown");
        const scheduleLabel = scheduleTypeBtn.querySelector("span");

        // Элементы второго выпадающего списка
        const groupBtn = document.querySelectorAll(".input_combobox")[1];
        const groupDropdown = document.getElementById("groupDropdown");
        const groupLabel = groupBtn.querySelector("span");
        const secondLabel = document.getElementById("secondLabel");

        // Опции для второго выпадающего списка
        const optionsByType = {
            Студент: ["ИС-127", "ИС-128", "ИС-129"],
            "По преподавателю": ["Иванов", "Петров", "Сидоров"]
        };

        // Текущий тип расписания и текущая опция второго списка
        let currentType = "Студент";
        let currentGroupOption = null;

        // Функция для обновления второго выпадающего списка
        function updateGroupOptions(type) {
            groupDropdown.innerHTML = ""; // Очищаем старые опции

            optionsByType[type].forEach((optionText) => {
                const btn = document.createElement("button");
                btn.className = "dropdown-option";
                btn.textContent = optionText;

                btn.addEventListener("click", function (e) {
                    e.preventDefault();
                    groupLabel.textContent = optionText; // Обновляем текст
                    currentGroupOption = optionText; // Сохраняем выбранную опцию
                    groupDropdown.classList.add("hidden"); // Закрываем список
                });

                groupDropdown.appendChild(btn);
            });

            // Обновляем метку над вторым списком
            secondLabel.textContent = {
                Студент: "Группа",
                "По преподавателю": "Преподаватель"
            }[type];

            // Восстанавливаем предыдущую опцию, если она существует в новом списке
            if (
                currentGroupOption &&
                optionsByType[type].includes(currentGroupOption)
            ) {
                groupLabel.textContent = currentGroupOption;
            } else {
                groupLabel.textContent = "Выберите...";
                currentGroupOption = null; // Сбрасываем, если опция недоступна
            }
        }

        // Открытие первого выпадающего списка
        scheduleTypeBtn.addEventListener("click", function (e) {
            e.preventDefault();
            scheduleDropdown.classList.toggle("hidden");
            groupDropdown.classList.add("hidden");
        });

        // Открытие второго выпадающего списка
        groupBtn.addEventListener("click", function (e) {
            e.preventDefault();
            groupDropdown.classList.toggle("hidden");
            scheduleDropdown.classList.add("hidden");
        });

        // Выбор опции в первом выпадающем списке
        scheduleDropdown
            .querySelectorAll(".dropdown-option")
            .forEach((option) => {
                option.addEventListener("click", function (e) {
                    e.preventDefault();
                    const selectedType = this.textContent;
                    scheduleLabel.textContent = selectedType; // Обновляем текст
                    scheduleDropdown.classList.add("hidden");
                    currentType = selectedType;
                    updateGroupOptions(selectedType); // Обновляем второй список
                });
            });

        // Закрытие списков при клике вне
        document.addEventListener("click", function (e) {
            if (
                !scheduleTypeBtn.contains(e.target) &&
                !scheduleDropdown.contains(e.target)
            ) {
                scheduleDropdown.classList.add("hidden");
            }
            if (
                !groupBtn.contains(e.target) &&
                !groupDropdown.contains(e.target)
            ) {
                groupDropdown.classList.add("hidden");
            }
        });

        // Инициализация
        scheduleLabel.textContent = "Студент";
        updateGroupOptions(currentType);

        // --- Переход по кнопке "Зарегестрироваться" ---
        const registerBtn = document.getElementById("registerBtn");
        registerBtn.addEventListener("click", function (e) {
            e.preventDefault(); // <--- ВАЖНО! Останавливаем переход по умолчанию

            // Валидация
            const emailInput = document.querySelector('input[name="email"]');
            const passwordInput = document.getElementById('passwordInput');
            const confirmPasswordInput = document.getElementById('confirmPasswordInput');
            const groupLabel = document.querySelectorAll(".input_combobox")[1].querySelector("span");
            const scheduleLabel = document.querySelectorAll(".input_combobox")[0].querySelector("span");

            let valid = true;

            // Сброс ошибок
            emailInput.classList.remove('input-error');
            passwordInput.classList.remove('input-error');
            confirmPasswordInput.classList.remove('input-error');

            // Проверка email
            const email = emailInput.value.trim();
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                emailInput.classList.add('input-error');
                valid = false;
            }

            // Проверка совпадения паролей
            if (passwordInput.value !== confirmPasswordInput.value || !passwordInput.value) {
                passwordInput.classList.add('input-error');
                confirmPasswordInput.classList.add('input-error');
                valid = false;
            }

            if (!valid) {
                if (!emailPattern.test(email)) {
                    alert('Пожалуйста, введите корректный email!');
                    emailInput.focus();
                } else if (passwordInput.value !== confirmPasswordInput.value || !passwordInput.value) {
                    alert('Пароли не совпадают или не заполнены!');
                    passwordInput.focus();
                }
                return false;
            }

            // --- Переход только если всё корректно ---
            const group = groupLabel.textContent.trim();
            const type = scheduleLabel.textContent.trim();

            if (type === "Студент") {
                if (group === "ИС-127") {
                    window.location.href = "../lk/my-schedule.html";
                } else if (group === "ИС-128") {
                    window.location.href = "../lk/my-schedule_is-128.html";
                } else if (group === "ИС-129") {
                    window.location.href = "../lk/my-schedule_is-129.html";
                } else {
                    alert("Пожалуйста, выберите группу!");
                }
            } else {
                alert("Для выбранного типа расписания переход не реализован.");
            }
        });
    });
</script>
<script>
const eyeOpen = `<svg viewBox="0 0 24 24"><path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12zm11 3a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>`;
const eyeClosed = `<svg viewBox="0 0 24 24"><path d="M17.94 17.94A10.94 10.94 0 0 1 12 19C5 19 1 12 1 12a21.8 21.8 0 0 1 5.06-7.94"/><path d="M22.54 12.88A10.94 10.94 0 0 0 23 12s-4-7-11-7a10.94 10.94 0 0 0-4.06.76"/><line x1="1" y1="1" x2="23" y2="23"/><path d="M9.53 9.53A3 3 0 0 0 12 15a3 3 0 0 0 2.47-5.47"/></svg>`;

let passwordsVisible = false;

function setPasswordVisibility(visible) {
    const passwordInputs = [
        document.getElementById('passwordInput'),
        document.getElementById('confirmPasswordInput')
    ];
    document.querySelectorAll('.toggle-password').forEach(btn => {
        btn.innerHTML = visible ? eyeOpen : eyeClosed;
    });
    passwordInputs.forEach(input => {
        if (input) input.type = visible ? "text" : "password";
    });
}

document.querySelectorAll('.toggle-password').forEach(btn => {
    btn.innerHTML = eyeClosed;
    btn.addEventListener('click', function () {
        passwordsVisible = !passwordsVisible;
        setPasswordVisibility(passwordsVisible);
    });
});
</script>
<script>
window.addEventListener('load', function() {
    const loader = document.getElementById('loader-bg');
    loader.classList.add('loaded');
    setTimeout(() => {
        loader.style.display = 'none';
    }, 600);
});
</script>
<script src="../js/Users.js"></script>
<script src="../js/auth.js"></script>





</body>

</html>